{"version":3,"file":"headers.js","sourceRoot":"","sources":["../../../../libs/client/src/headers.ts"],"names":[],"mappings":";;;AAkCA,sDAYC;AASD,kDAQC;AA/DD;;;GAGG;AACU,QAAA,2BAA2B,GAAG,CAAC,CAAC;AAE7C;;GAEG;AACU,QAAA,sBAAsB,GAAG,uBAAuB,CAAC;AAE9D;;GAEG;AACU,QAAA,2BAA2B,GAAG,4BAA4B,CAAC;AAExE;;GAEG;AACU,QAAA,qBAAqB,GAAG,sBAAsB,CAAC;AAE5D;;GAEG;AACU,QAAA,kBAAkB,GAAG,mBAAmB,CAAC;AAEtD;;;;;;;GAOG;AACH,SAAgB,qBAAqB,CAAC,OAAe;IACnD,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC;QAClD,MAAM,IAAI,KAAK,CAAC,iCAAiC,OAAO,EAAE,CAAC,CAAC;IAC9D,CAAC;IAED,IAAI,OAAO,IAAI,mCAA2B,EAAE,CAAC;QAC3C,MAAM,IAAI,KAAK,CACb,gCAAgC,mCAA2B,UAAU,CACtE,CAAC;IACJ,CAAC;IAED,OAAO,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC5B,CAAC;AAED;;;;;;GAMG;AACH,SAAgB,mBAAmB,CAAC,OAAgB;IAClD,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;QAC1B,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,OAAO;QACL,CAAC,8BAAsB,CAAC,EAAE,qBAAqB,CAAC,OAAO,CAAC;KACzD,CAAC;AACJ,CAAC","sourcesContent":["/**\n * Minimum allowed request timeout in seconds.\n * Matches the Python client's MIN_REQUEST_TIMEOUT_SECONDS.\n */\nexport const MIN_REQUEST_TIMEOUT_SECONDS = 1;\n\n/**\n * Header name for server-side request timeout.\n */\nexport const REQUEST_TIMEOUT_HEADER = \"x-fal-request-timeout\";\n\n/**\n * Header name for timeout type (user vs infrastructure).\n */\nexport const REQUEST_TIMEOUT_TYPE_HEADER = \"x-fal-request-timeout-type\";\n\n/**\n * Header name for queue priority.\n */\nexport const QUEUE_PRIORITY_HEADER = \"x-fal-queue-priority\";\n\n/**\n * Header name for runner hint.\n */\nexport const RUNNER_HINT_HEADER = \"x-fal-runner-hint\";\n\n/**\n * Validates the timeout and returns the header value as a string.\n * Throws an error if the timeout is invalid.\n *\n * @param timeout - The timeout value in seconds (must be > MIN_REQUEST_TIMEOUT_SECONDS)\n * @returns The timeout as a string suitable for the header value\n * @throws Error if timeout is not a valid number or is <= MIN_REQUEST_TIMEOUT_SECONDS\n */\nexport function validateTimeoutHeader(timeout: number): string {\n  if (typeof timeout !== \"number\" || isNaN(timeout)) {\n    throw new Error(`Timeout must be a number, got ${timeout}`);\n  }\n\n  if (timeout <= MIN_REQUEST_TIMEOUT_SECONDS) {\n    throw new Error(\n      `Timeout must be greater than ${MIN_REQUEST_TIMEOUT_SECONDS} seconds`,\n    );\n  }\n\n  return timeout.toString();\n}\n\n/**\n * Creates headers object with the timeout header if timeout is provided.\n * Returns an empty object if timeout is undefined.\n *\n * @param timeout - Optional timeout value in seconds\n * @returns Headers object with REQUEST_TIMEOUT_HEADER if timeout is provided\n */\nexport function buildTimeoutHeaders(timeout?: number): Record<string, string> {\n  if (timeout === undefined) {\n    return {};\n  }\n\n  return {\n    [REQUEST_TIMEOUT_HEADER]: validateTimeoutHeader(timeout),\n  };\n}\n"]}